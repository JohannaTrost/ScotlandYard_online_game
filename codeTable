# script créé le : Wed Nov 20 23:44:46 CET 2019 -   syntaxe MySQL ;

# use  VOTRE_BASE_DE_DONNEE ;

DROP TABLE IF EXISTS QUARTIERS ;
CREATE TABLE QUARTIERS (idQ int AUTO_INCREMENT NOT NULL,
nomQ CHAR,
codeInsee INT,
coords CHAR,
typeQ CHAR,
idC INT NOT NULL,
PRIMARY KEY (idQ) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS DEPARTEMENT ;
CREATE TABLE DEPARTEMENT (idD int AUTO_INCREMENT NOT NULL,
PRIMARY KEY (idD) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS COMMUNE ;
CREATE TABLE COMMUNE (idC int AUTO_INCREMENT NOT NULL,
nomC CHAR,
cpCommune CHAR,
idD INT NOT NULL,
PRIMARY KEY (idC) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS ROUTES ;
CREATE TABLE ROUTES (idR int AUTO_INCREMENT NOT NULL,
nomR INT,
typeTransport CHAR,
idQ INT NOT NULL,
idQ__DEPART INT NOT NULL,
PRIMARY KEY (idR) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS PARTIE ;
CREATE TABLE PARTIE (idPartie int AUTO_INCREMENT NOT NULL,
dateDemarage DATE,
nbDetecgives INT,
idJ INT NOT NULL,
PRIMARY KEY (idPartie) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS JOUEUSES ;
CREATE TABLE JOUEUSES (idJ int AUTO_INCREMENT NOT NULL,
nomJ VARCHAR,
emailJ VARCHAR,
PRIMARY KEY (idJ) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS CONFIGURATION ;
CREATE TABLE CONFIGURATION (idConfiguration int AUTO_INCREMENT NOT NULL,
nomConfiguration VARCHAR,
dateConfiguratiion DATE,
strategieConfiguration ENUM,
PRIMARY KEY (idConfiguration) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS IMAGE ;
CREATE TABLE IMAGE (idI int AUTO_INCREMENT NOT NULL,
nomI VARCHAR,
cheminImage VARCHAR,
PRIMARY KEY (idI) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS TOURSMISTERX ;
CREATE TABLE TOURSMISTERX (idM int AUTO_INCREMENT NOT NULL,
PRIMARY KEY (idM) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS TRANSPORT ;
CREATE TABLE TRANSPORT (idTransport int AUTO_INCREMENT NOT NULL,
nomT VARCHAR,
PRIMARY KEY (idTransport) ) ENGINE=InnoDB;

DROP TABLE IF EXISTS INCLUS ;
CREATE TABLE INCLUS (idI int AUTO_INCREMENT NOT NULL,
idConfiguration INT NOT NULL,
PRIMARY KEY (idI,
 idConfiguration) ) ENGINE=InnoDB;

ALTER TABLE QUARTIERS ADD CONSTRAINT FK_QUARTIERS_idC FOREIGN KEY (idC) REFERENCES COMMUNE (idC);

ALTER TABLE COMMUNE ADD CONSTRAINT FK_COMMUNE_idD FOREIGN KEY (idD) REFERENCES DEPARTEMENT (idD);
ALTER TABLE ROUTES ADD CONSTRAINT FK_ROUTES_idQ FOREIGN KEY (idQ) REFERENCES QUARTIERS (idQ);
ALTER TABLE ROUTES ADD CONSTRAINT FK_ROUTES_idQ__DEPART FOREIGN KEY (idQ__DEPART) REFERENCES QUARTIERS (idQ);
ALTER TABLE PARTIE ADD CONSTRAINT FK_PARTIE_idJ FOREIGN KEY (idJ) REFERENCES JOUEUSES (idJ);
ALTER TABLE INCLUS ADD CONSTRAINT FK_INCLUS_idI FOREIGN KEY (idI) REFERENCES IMAGE (idI);
ALTER TABLE INCLUS ADD CONSTRAINT FK_INCLUS_idConfiguration FOREIGN KEY (idConfiguration) REFERENCES CONFIGURATION (idConfiguration);
