# script créé le : Wed Nov 20 23:44:46 CET 2019 -   syntaxe MySQL;

# use  VOTRE_BASE_DE_DONNEE;

DROP TABLE IF EXISTS Quartiers;
CREATE TABLE Quartiers (idQ int AUTO_INCREMENT NOT NULL,
nomQ varchar(255),
codeInsee INT,
coords varchar(255),
typeQ varchar(255),
departement INT NOT NULL,
PRIMARY KEY (idQ) );

DROP TABLE IF EXISTS Departement;
CREATE TABLE Departement (idD int AUTO_INCREMENT NOT NULL,
PRIMARY KEY (idD) );

DROP TABLE IF EXISTS Commune;
CREATE TABLE Commune (departement int AUTO_INCREMENT NOT NULL,
nomC varchar(255),
cpCommune varchar(255),
idD INT NOT NULL,
PRIMARY KEY (departement) );

DROP TABLE IF EXISTS Routes;
CREATE TABLE Routes (idR int AUTO_INCREMENT NOT NULL,
nomR INT,
typeTransport varchar(255),
idQ INT NOT NULL,
idQ__DEPART INT NOT NULL,
PRIMARY KEY (idR) );

DROP TABLE IF EXISTS Partie;
CREATE TABLE Partie (idPartie int AUTO_INCREMENT NOT NULL,
dateDemarage DATE,
nbDetecgives INT,
idJ INT NOT NULL,
PRIMARY KEY (idPartie) );

DROP TABLE IF EXISTS Joueuses;
CREATE TABLE Joueuses (idJ int AUTO_INCREMENT NOT NULL,
nomJ varchar(255),
emailJ varchar(255),
PRIMARY KEY (idJ) );

DROP TABLE IF EXISTS Configuration;
CREATE TABLE Configuration (idConfiguration int AUTO_INCREMENT NOT NULL,
nomConfiguration varchar(255),
dateConfiguratiion DATE,
strategieConfiguration ENUM,
PRIMARY KEY (idConfiguration) );

DROP TABLE IF EXISTS Image;
CREATE TABLE Image (idI int AUTO_INCREMENT NOT NULL,
nomI varchar(255),
cheminImage varchar(255),
PRIMARY KEY (idI) );

DROP TABLE IF EXISTS ToursMisterX;
CREATE TABLE ToursMisterX (idM int AUTO_INCREMENT NOT NULL,
PRIMARY KEY (idM) );

DROP TABLE IF EXISTS TRANSPORT;
CREATE TABLE TRANSPORT (idTransport int AUTO_INCREMENT NOT NULL,
nomT varchar(255),
PRIMARY KEY (idTransport) );

DROP TABLE IF EXISTS Inclus;
CREATE TABLE Inclus (idI int AUTO_INCREMENT NOT NULL,
idConfiguration INT NOT NULL,
PRIMARY KEY (idI,
 idConfiguration) );

ALTER TABLE Quartiers ADD CONSTRAINT FK_Quartiers_departement FOREIGN KEY (departement) REFERENCES Commune (departement);

ALTER TABLE Commune ADD CONSTRAINT FK_Commune_idD FOREIGN KEY (idD) REFERENCES Departement (idD);
ALTER TABLE Routes ADD CONSTRAINT FK_Routes_idQ FOREIGN KEY (idQ) REFERENCES Quartiers (idQ);
ALTER TABLE Routes ADD CONSTRAINT FK_Routes_idQ__DEPART FOREIGN KEY (idQ__DEPART) REFERENCES Quartiers (idQ);
ALTER TABLE Partie ADD CONSTRAINT FK_Partie_idJ FOREIGN KEY (idJ) REFERENCES Joueuses (idJ);
ALTER TABLE Inclus ADD CONSTRAINT FK_Inclus_idI FOREIGN KEY (idI) REFERENCES Image (idI);
ALTER TABLE Inclus ADD CONSTRAINT FK_Inclus_idConfiguration FOREIGN KEY (idConfiguration) REFERENCES Configuration (idConfiguration);
